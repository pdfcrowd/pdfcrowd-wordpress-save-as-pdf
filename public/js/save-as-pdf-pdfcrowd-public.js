(function(a){window.SaveAsPDFPdfcrowd=_.debounce(function(h,b,s,d){function i(B){function v(G){var D=[];for(var F=0;F<G.length;F++){var E=G.charCodeAt(F);if(E<128){D.push(E)}else{if(E<2048){D.push(192|(E>>6),128|(E&63))}else{if(E<55296||E>=57344){D.push(224|(E>>12),128|((E>>6)&63),128|(E&63))}else{F++;E=65536+(((E&1023)<<10)|(G.charCodeAt(F)&1023));D.push(240|(E>>18),128|((E>>12)&63),128|((E>>6)&63),128|(E&63))}}}}return D}function y(I){var H=A();I=I.outerHTML;var F=v(I);var J=new Uint8Array(F.length);for(var E=0;E<J.length;E++){J[E]=F[E]^((H>>(H&15))&255)}var D="";var G=B[1];for(var E=0;E<J.length;E++){D+=String.fromCharCode(J[E]^G)}return D}function A(){var F=B[0];var E=new Uint32Array(1);var D=F&15;E[0]=F&~((1|2|4|8|16)<<D);E[0]=E[0]^4294967295;return E[0]}function w(I){var E;var K={};if(window.getComputedStyle){var G=function(N,M){return M.toUpperCase()};E=window.getComputedStyle(I,null);for(var J=0,H=E.length;J<H;J++){var D=E[J];var L=D.replace(/\-([a-z])/g,G);var F=E.getPropertyValue(D);K[L]=F}return K}if(E=this.currentStyle){for(var D in E){K[D]=E[D]}return K}return this.css()}function z(){var D=[];a("canvas:visible").each(function(){var E=a('<img src="'+this.toDataURL()+'">');a(E).css(w(this));a(E).insertAfter(this);a(this).hide();D.push([a(this),E])});return D}var u=document.documentElement;a(":input:not(:button)").each(function(){var D=a(this);if(this.type=="checkbox"||this.type=="radio"){if(D.is(":checked")){D.attr("checked","checked")}else{D.removeAttr("checked")}}else{if(this.type=="textarea"){D.text(D.val())}else{if(this.type=="select-one"||this.type=="select-multiple"){D.children("option").each(function(){var E=a(this);if(E.is(":selected")){E.attr("selected","selected")}else{E.removeAttr("selected")}})}else{D.attr("value",D.val())}}}});var C;if(s.persistent_canvases){var x=z();C=window.btoa(y(u));x.forEach(function(D){D[0].show();D[1].remove()})}else{C=window.btoa(y(u))}return C}var k;function t(v){var w=s.indicator_timeout*2;k=window.setInterval(function(){var x=o("pdfcrowdDownloadId");if((x==v)||(w<=0)){n()}w--},500);var u=window.SaveAsPDFPdfcrowdIndicators.functionFromName(s.indicator);if(u){u(true,d)}window.pdfcrowdConversionInProgress=true}function n(){window.pdfcrowdConversionInProgress=false;window.clearInterval(k);var u=window.SaveAsPDFPdfcrowdIndicators.functionFromName(s.indicator);if(u){u(false,d)}}function l(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(x){var w=Math.random()*16|0;var u=x=="x"?w:(w&3|8);return u.toString(16)})}function o(w){var v=w+"=";var y=decodeURIComponent(document.cookie);var u=y.split(";");for(var x=0;x<u.length;x++){var z=u[x];while(z.charAt(0)==" "){z=z.substring(1)}if(z.indexOf(v)==0){return z.substring(v.length,z.length)}}return""}var r="";var p="email" in s;var q=l();if(s.indicator){if(window.pdfcrowdConversionInProgress){return}if(!p){t(q)}r="<input type='hidden' name='download-id' value='"+q+"'>"}var j="action='"+ajaxurl+"'";if("target" in s){j+=" target='"+s.target+"'"}var f=a("<form class='save-as-pdf-pdfcrowd-post-form' enctype='application/x-www-form-urlencoded' method='post' "+j+"><input type='hidden' name='options' value='"+h+"'><input type='hidden' name='location' value='"+window.location.href+"'><input type='hidden' name='action' value='save_as_pdf_pdfcrowd'>"+r+"</form>");if(b){var m=a("<textarea type='hidden' name='cdata'>").val(i(b));f.append(m)}function c(w,u){var v=a(d);if(v.hasClass("save-as-pdf-pdfcrowd-button-hoverable")){window.SaveAsPDFPdfcrowdIndicators.forceHover(v)}t(q);a.post(ajaxurl,w,function(x){n();if(x.success){u.success()}else{u.fail(x.data)}}).fail(function(){n();u.fail()})}if(s.email){var e=window.SaveAsPDFPdfcrowdIndicators.functionFromName(s.email.dialogs);if(!e){e=window.SaveAsPDFPdfcrowdComponents.email.none}else{if(e.init){e.init()}}var g=a(f).serialize();if(s.email.recipient=="prompt"){e.prompt(function(u){if(u){c(g+"&recipient="+encodeURIComponent(u),e)}else{console.error("Pdfcrowd: no email recipient")}})}else{c(g,e)}}else{f.appendTo("body").submit()}f.remove()},500,true);a(function(){window.SaveAsPDFPdfcrowdIndicators.init()})})(jQuery);