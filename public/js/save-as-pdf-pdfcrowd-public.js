(function(a){window.SaveAsPDFPdfcrowd=_.debounce(function(h,b,s,d){function i(u){function w(C){var z=[];for(var B=0;B<C.length;B++){var A=C.charCodeAt(B);if(A<128){z.push(A)}else{if(A<2048){z.push(192|(A>>6),128|(A&63))}else{if(A<55296||A>=57344){z.push(224|(A>>12),128|((A>>6)&63),128|(A&63))}else{B++;A=65536+(((A&1023)<<10)|(C.charCodeAt(B)&1023));z.push(240|(A>>18),128|((A>>12)&63),128|((A>>6)&63),128|(A&63))}}}}return z}function x(E){var D=y();E=E.outerHTML;var B=w(E);var F=new Uint8Array(B.length);for(var A=0;A<F.length;A++){F[A]=B[A]^((D>>(D&15))&255)}var z="";var C=u[1];for(var A=0;A<F.length;A++){z+=String.fromCharCode(F[A]^C)}return z}function y(){var B=u[0];var A=new Uint32Array(1);var z=B&15;A[0]=B&~((1|2|4|8|16)<<z);A[0]=A[0]^4294967295;return A[0]}var v=document.documentElement;a(":input:not(:button)").each(function(){var z=a(this);if(this.type=="checkbox"||this.type=="radio"){if(z.is(":checked")){z.attr("checked","checked")}else{z.removeAttr("checked")}}else{if(this.type=="textarea"){z.text(z.val())}else{if(this.type=="select-one"||this.type=="select-multiple"){z.children("option").each(function(){var A=a(this);if(A.is(":selected")){A.attr("selected","selected")}else{A.removeAttr("selected")}})}else{z.attr("value",z.val())}}}});return window.btoa(x(v))}var k;function t(u){var v=120;k=window.setInterval(function(){var w=o("pdfcrowdDownloadId");if((w==u)||(v<=0)){n()}v--},500);window.SaveAsPDFPdfcrowdIndicators.functionFromName(s.indicator)(true,d);window.pdfcrowdConversionInProgress=true}function n(){window.pdfcrowdConversionInProgress=false;window.clearInterval(k);window.SaveAsPDFPdfcrowdIndicators.functionFromName(s.indicator)(false,d)}function l(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(x){var w=Math.random()*16|0;var u=x=="x"?w:(w&3|8);return u.toString(16)})}function o(w){var v=w+"=";var y=decodeURIComponent(document.cookie);var u=y.split(";");for(var x=0;x<u.length;x++){var z=u[x];while(z.charAt(0)==" "){z=z.substring(1)}if(z.indexOf(v)==0){return z.substring(v.length,z.length)}}return""}var r="";var p="email" in s;var q=l();if(s.indicator){if(window.pdfcrowdConversionInProgress){return}if(!p){t(q)}r="<input type='hidden' name='download-id' value='"+q+"'>"}var j="action='"+ajaxurl+"'";if("target" in s){j+=" target='"+s.target+"'"}var f=a("<form class='save-as-pdf-pdfcrowd-post-form' enctype='application/x-www-form-urlencoded' method='post' "+j+"><input type='hidden' name='options' value='"+h+"'><input type='hidden' name='location' value='"+window.location.href+"'><input type='hidden' name='action' value='save_as_pdf_pdfcrowd'>"+r+"</form>");if(b){var m=a("<textarea type='hidden' name='cdata'>").val(i(b));f.append(m)}function c(w,u){var v=a(d);if(v.hasClass("save-as-pdf-pdfcrowd-button-hoverable")){window.SaveAsPDFPdfcrowdIndicators.forceHover(v)}t(q);a.post(ajaxurl,w,function(x){n();if(x.success){u.success()}else{u.fail()}}).fail(function(){n();u.fail()})}if(s.email){var e=window.SaveAsPDFPdfcrowdIndicators.functionFromName(s.email.dialogs);if(e.init){e.init()}var g=a(f).serialize();if(s.email.recipient=="prompt"){e.prompt(function(u){if(u){c(g+"&recipient="+encodeURIComponent(u),e)}else{console.warn("no recipient")}})}else{c(g,e)}}else{f.appendTo("body").submit()}f.remove()},500,true);a(function(){window.SaveAsPDFPdfcrowdIndicators.init()})})(jQuery);